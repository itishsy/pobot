# 代码推送脚本使用说明

## 脚本文件

本项目提供了两个bat脚本，用于同时将代码推送到GitHub和Gitee：

1. **`push_to_both.bat`** - 基础版本
2. **`push_to_both_advanced.bat`** - 高级版本（推荐）

## 使用方法

### 1. 基础版本 (`push_to_both.bat`)

**功能特点：**
- 简单的推送逻辑
- 失败时自动重试3次
- 每次重试间隔5秒

**使用方法：**
```bash
# 在项目根目录下双击运行
push_to_both.bat
```

### 2. 高级版本 (`push_to_both_advanced.bat`)

**功能特点：**
- 智能检查Git状态
- 检测未提交的更改
- 验证远程仓库配置
- 失败时自动重试3次
- 详细的错误处理和状态报告
- 支持中文显示

**使用方法：**
```bash
# 在项目根目录下双击运行
push_to_both_advanced.bat
```

## 前置条件

### 1. 配置远程仓库

确保已配置GitHub和Gitee远程仓库：

```bash
# 查看当前远程仓库
git remote -v

# 如果没有配置，请添加：
git remote add origin https://github.com/用户名/仓库名.git
git remote add gitee https://gitee.com/用户名/仓库名.git
```

### 2. 确保工作目录干净

推送前建议先提交所有更改：

```bash
git add .
git commit -m "提交信息"
```

## 脚本特性

### 重试机制
- **最大重试次数**: 3次
- **重试间隔**: 5秒
- **智能重试**: 只有推送失败时才重试

### 错误处理
- 网络连接失败自动重试
- 权限问题提示用户检查
- 详细的错误信息显示

### 状态检查
- 验证Git仓库状态
- 检查远程仓库配置
- 检测未提交的更改

## 输出示例

### 成功推送
```
========================================
🚀 智能代码推送脚本 v2.0
========================================

📋 检查Git状态...
✅ 远程仓库配置正常

[1/2] 🐙 推送到GitHub...
   尝试第 1 次推送到GitHub...
   ✅ GitHub推送成功！

[2/2] 🐉 推送到Gitee...
   尝试第 1 次推送到Gitee...
   ✅ Gitee推送成功！

========================================
📊 推送结果汇总
========================================
GitHub: ✅ 成功
Gitee:  ✅ 成功

🎉 所有推送完成！
```

### 部分失败
```
========================================
📊 推送结果汇总
========================================
GitHub: ❌ 失败
Gitee:  ✅ 成功

⚠️  部分推送失败，请检查网络连接和仓库权限
```

## 故障排除

### 常见问题

1. **"未配置GitHub远程仓库"**
   - 运行 `git remote add origin https://github.com/用户名/仓库名.git`

2. **"未配置Gitee远程仓库"**
   - 运行 `git remote add gitee https://gitee.com/用户名/仓库名.git`

3. **推送失败**
   - 检查网络连接
   - 验证仓库权限
   - 确认用户名密码或SSH密钥配置

4. **权限被拒绝**
   - 检查GitHub/Gitee账号权限
   - 确认SSH密钥或访问令牌配置

### 手动推送命令

如果脚本失败，可以手动执行：

```bash
# 推送到GitHub
git push origin main

# 推送到Gitee
git push gitee main
```

## 注意事项

1. **网络环境**: 确保能正常访问GitHub和Gitee
2. **权限配置**: 确保有推送权限
3. **分支名称**: 脚本默认推送到`main`分支，如需其他分支请修改脚本
4. **中文支持**: 高级版本支持中文显示，基础版本可能显示乱码

## 自定义配置

可以修改脚本中的以下参数：

```batch
:: 设置重试次数和等待时间
set MAX_RETRIES=3      # 最大重试次数
set WAIT_TIME=5        # 重试间隔（秒）
```

## 技术支持

如果遇到问题，请检查：
1. Git是否正确安装
2. 远程仓库是否正确配置
3. 网络连接是否正常
4. 仓库权限是否正确
